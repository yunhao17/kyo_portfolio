<%
  if controller.action_name == "index"
    url = spots_path(:sort => "favo")
  elsif controller.action_name == "eria_mokuteki"
    url = eria_purpose_path(:sort => "favo")
  elsif controller.action_name == "mokuteki"
    url = mokuteki_path(:sort => "favo")
  end
%>

<div class="container">
  <div class="row">
    <div class="col-12">
      <h1 class="text-center">スポット一覧</h1>
      <%= link_to "いいねが多い順",url %>
      <table class="table">
        <thead>
          <tr>
            <th>エリア名</th>
            <th>目的</th>
            <th>スポット画像</th>
            <th>スポット名</th>
            <th>スポット説明</th>
            <th>いいね数</th>
            <th>コメント件数</th>
          </tr>
        </thead>
        <% @spots.each do |spot| %>
        <tbody>
          <tr>
            <th><%= spot.area.name %></th>
            <th><%= spot.purpose.name %></th>
            <th><%= attachment_image_tag spot, :image, :fill, 50, 50, fallback: "no_image.jpg" %></th>
            <th>
              <%= link_to spot_path(spot.id) do%>
              <%= spot.name %>
              <% end %>
            </th>
            <th><%= spot.description %></th>
            <th><%= spot.favorites.count %></th>
            <th><%= spot.spot_comments.count %></th>
          </tr>
        </tbody>
        <% end %>
      </table>
    </div>
  </div>
</div>
<%= paginate @spots %>